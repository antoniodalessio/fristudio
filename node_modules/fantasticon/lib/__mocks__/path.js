"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
exports.__esModule = true;
var startsWith_1 = __importDefault(require("lodash/startsWith"));
var _path = jest.requireActual('path');
var _relative = _path.relative;
var projectDir = _path.resolve(__dirname, '../../');
var resolve = function () {
    var paths = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        paths[_i] = arguments[_i];
    }
    var path = '';
    for (var _a = 0, paths_1 = paths; _a < paths_1.length; _a++) {
        var cur = paths_1[_a];
        path = !path ? normalise(cur) : _path.join(path, normalise(cur));
    }
    if (startsWith_1["default"](path, projectDir)) {
        path = _path.join('/root/project', path.substr(projectDir.length));
    }
    else if (startsWith_1["default"](path, '/') && !startsWith_1["default"](path, '/root')) {
        path = _path.join('/root/', path.substr(1));
    }
    else {
        if (startsWith_1["default"](path, './')) {
            path = _path.join('/root/project/', path.substr(2));
        }
        else if (!startsWith_1["default"](path, '/')) {
            path = _path.join('/root/project/', path);
        }
    }
    return normalise(path);
};
var relative = function (a, b) {
    return normalise(_relative(_path.normalize(a), _path.normalize(b)));
};
var join = function () {
    var segments = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        segments[_i] = arguments[_i];
    }
    var trimmed = [];
    segments.forEach(function (current, i) {
        var isFirst = i === 0;
        var isLast = i === segments.length - 1;
        if (!isFirst && current.substr(0, 1) === '/') {
            current = current.substr(1);
        }
        if (!isLast && current.substr(-1) === '/') {
            current = current.substring(0, current.length - 1);
        }
        trimmed.push(current);
    });
    return trimmed.join('/');
};
var normalise = function (path) { return path.replace(/\\/g, '/'); };
var isAbsolute = function (path) { return startsWith_1["default"](path, '/root'); };
module.exports = { resolve: resolve, relative: relative, join: join, isAbsolute: isAbsolute };
//# sourceMappingURL=path.js.map